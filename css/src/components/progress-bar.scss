$progress-bar-height-medium: 0.125rem !default;
$progress-bar-height-large: 0.25rem !default;

$progress-bar-background-color: $secondary-background !default;
$progress-bar-body-background-color: $primary !default;
$progress-bar-success-background-color: $success !default;
$progress-bar-warning-background-color: $warning !default;
$progress-bar-danger-background-color: $danger !default;
$progress-bar-border-radius: $border-radius-rounded !default;

$progress-bar-indeterminate-animation-duration: 2s !default;
$progress-bar-transition-duration: 0.3s !default;

.progress-bar {
	position: relative;
	width: 100%;
	height: $progress-bar-height-medium;
	border-radius: $progress-bar-border-radius;
	background-color: $progress-bar-background-color;
	overflow: hidden;

	@include forced-colors {
		background-color: CanvasText !important;
	}

	.theme-high-contrast & {
		background-color: $secondary-background-glow-high-contrast;
	}

	&.progress-bar-md {
		height: $progress-bar-height-medium;
	}

	&.progress-bar-lg {
		height: $progress-bar-height-large;
	}

	&.message-border {
		border-radius: 0;
		border-end-start-radius: $message-border-radius;
		border-end-end-radius: $message-border-radius;
	}

	@mixin indeterminate-gradient($color) {
		position: absolute;
		width: 100%;
		animation: progress-bar-indeterminate-animation $progress-bar-indeterminate-animation-duration
			infinite linear;
		background: linear-gradient(to right, transparent 0%, $color 50%, transparent 100%);

		@include prefers-reduced-motion {
			animation-duration: 0s;
		}

		&:dir(rtl) {
			background: linear-gradient(to left, transparent 0%, $color 50%, transparent 100%);
		}

		inset-block-start: 0;
		inset-inline-start: 0;
	}

	.progress-bar-body {
		height: 100%;
		transition: width $progress-bar-transition-duration ease;
		background-color: $progress-bar-body-background-color;

		@include forced-colors {
			background-color: Highlight !important;
		}

		&.progress-bar-success {
			background-color: $progress-bar-success-background-color;

			&.indeterminate {
				@include indeterminate-gradient($progress-bar-success-background-color);
			}
		}

		&.progress-bar-warning {
			background-color: $progress-bar-warning-background-color;

			&.indeterminate {
				@include indeterminate-gradient($progress-bar-warning-background-color);
			}
		}

		&.progress-bar-danger {
			background-color: $progress-bar-danger-background-color;

			&.indeterminate {
				@include indeterminate-gradient($progress-bar-danger-background-color);
			}
		}

		&.indeterminate {
			@include indeterminate-gradient($progress-bar-body-background-color);
		}
	}
}
