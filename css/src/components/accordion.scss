/* stylelint-disable selector-no-qualifying-type */
$accordion-font-size-sm: $font-size-8 !default;
$accordion-font-size-md: $font-size-7 !default;
$accordion-font-size-lg: $font-size-6 !default;

$accordion-spacing-sm: $spacer-3 !default;
$accordion-spacing-md: $spacer-4 !default;
$accordion-spacing-lg: $spacer-5 !default;
$accordion-spacing-bg-offset-sm: $spacer-7 !default;
$accordion-spacing-bg-offset-md: $spacer-8 !default;
$accordion-spacing-bg-offset-lg: $spacer-9 !default;

$accordion-transition: transform 0.15s !default;

@mixin accordion-size-adjuster($font-size, $padding-size, $bg-offset) {
	font-size: $font-size;

	.accordion-content,
	summary {
		padding-block: $padding-size;

		&:not(.accordion-icon-end)::before,
		&.accordion-icon-end::after {
			inset-block-start: calc($control-padding-horizontal + $padding-size);
		}

		&.accordion-icon-end::before {
			inset-inline-start: -calc($padding-size);
		}
	}

	.accordion-content {
		padding-block: $padding-size;
	}

	.accordion-content[class*='background-color-'] {
		padding-inline: $padding-size;
	}

	&[class*='background-color-'] {
		summary,
		.accordion-content {
			padding-inline: $padding-size;
		}

		summary:not(.accordion-icon-end) {
			padding-inline-start: $bg-offset;

			&::before {
				inset-inline-start: $padding-size;
			}
		}

		&.accordion-icon-end::after {
			inset-inline-end: $padding-size;
		}
	}
}

.accordion {
	@include accordion-size-adjuster(
		$accordion-font-size-md,
		$accordion-spacing-md,
		$accordion-spacing-bg-offset-md
	);

	line-height: 1.5;

	summary {
		display: block;
		position: relative;
		cursor: pointer;

		&:hover {
			color: $primary-hover;

			&::before,
			&::after {
				border-color: $primary-hover;
			}
		}

		&:not(.accordion-icon-end) {
			padding-inline-start: $accordion-spacing-bg-offset-sm;

			&::before {
				@include chevron-right;

				position: absolute;
				inset-inline-start: 0;
				transition: $accordion-transition;
			}
		}

		&.accordion-icon-end::after {
			@include chevron-down;

			position: absolute;
			transition: $accordion-transition;
		}
	}

	&[class*='background-color-'] {
		&.accordion-icon-end {
			padding-inline-end: calc(($control-padding-horizontal + $chevron-arrow-actual-width));
		}
	}

	&[open] {
		summary:not(.accordion-icon-end)::before {
			// chevron-down
			transform: rotate(-45deg) translate(calc($chevron-arrow-size / 2), 0);
		}

		summary.accordion-icon-end::after {
			//chevron-up
			transform: rotate(-225deg);
		}
	}

	.accordion-content {
		// Constant content body text size regardless of <summary> heading text-sizing
		font-size: $accordion-font-size-md;
	}
}

.accordion-lg {
	@include accordion-size-adjuster(
		$accordion-font-size-lg,
		$accordion-spacing-lg,
		$accordion-spacing-bg-offset-lg
	);
}

.accordion-sm {
	@include accordion-size-adjuster(
		$accordion-font-size-sm,
		$accordion-spacing-sm,
		$accordion-spacing-bg-offset-sm
	);
}
